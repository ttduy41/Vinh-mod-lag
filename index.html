<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINHMODLAG V54 - CHU·∫®N ZALO CH√çNH CH·ª¶</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00a884; --bg: #f0f2f5; --card: #ffffff; --text: #1c1e21; --border: #e4e6eb; --header: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; overflow-x: hidden; }
        
        /* AUTH SCREEN */
        #authScreen { position: fixed; inset: 0; background: var(--accent); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: var(--card); padding: 35px; border-radius: 25px; width: 380px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        .auth-tabs { display: flex; margin-bottom: 20px; background: #f0f2f5; border-radius: 12px; padding: 5px; }
        .auth-tab { flex: 1; padding: 10px; cursor: pointer; border-radius: 8px; font-weight: bold; transition: 0.3s; color: #666; }
        .auth-tab.active { background: white; color: var(--accent); box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

        /* HEADER */
        header { position: fixed; top:0; width:100%; height:75px; background: var(--header); display:flex; align-items:center; padding:0 25px; box-shadow:0 2px 15px rgba(0,0,0,0.1); z-index:1000; box-sizing:border-box; }
        .logo { font-weight:900; font-size: 26px; color:var(--accent); cursor: pointer; }
        .wallet { background:#1a1a1a; color:#00ff88; padding:8px 18px; border-radius:30px; font-weight:bold; margin-left:auto; border: 2px solid var(--accent); font-family: monospace; }

        /* UI */
        .container { margin-top:100px; padding:20px; max-width:1100px; margin-inline:auto; }
        .intro-box { background: linear-gradient(135deg, #00a884 0%, #007d63 100%); color: white; padding: 25px; border-radius: 20px; margin-bottom: 25px; }
        .intro-box a { color: #fff; font-weight: bold; text-decoration: underline; }
        
        .shop-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); gap:20px; }
        .product-card { background: var(--card); padding:20px; border-radius:20px; border:1px solid var(--border); text-align:center; transition: 0.3s; }
        .stock-badge { font-size: 11px; background: #f0f2f5; padding: 10px; border-radius: 12px; text-align: left; margin-bottom: 15px; border-left: 3px solid var(--accent); }

        input, select, button, textarea { width:100%; padding:13px; margin:8px 0; border-radius:10px; border:1px solid var(--border); box-sizing: border-box; outline: none; font-family: inherit; }
        .btn-buy { background:var(--accent); color:#fff; border:none; font-weight:bold; cursor:pointer; text-transform:uppercase; transition: 0.2s; }
        .btn-buy:disabled { background: #ccc; cursor: not-allowed; }

        /* SIDE MENU */
        #sideMenu { position:fixed; top:0; left:-450px; width:380px; height:100%; background: var(--card); z-index:2000; padding:25px; transition:0.4s; box-shadow:15px 0 40px rgba(0,0,0,0.3); overflow-y:auto; box-sizing:border-box; }
        
        /* ROBOT & MODAL */
        #robotConsole { background: #000; color: #0f8; padding: 15px; border-radius: 15px; font-family: monospace; margin-top: 15px; border: 1px solid #333; }
        #robotLogs { height: 100px; overflow-y: auto; font-size: 11px; margin-bottom: 10px; border-bottom: 1px solid #222; white-space: pre-wrap; }
        
        .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:5000; align-items:center; justify-content:center; backdrop-filter: blur(5px); }
        .modal-content { background: var(--card); padding:30px; border-radius:25px; width:450px; border:2px solid var(--accent); max-height: 85vh; overflow-y: auto; }
        .hist-item { background: #f8f9fa; padding: 12px; border-radius: 12px; margin-bottom: 8px; border-left: 5px solid var(--accent); text-align: left; font-size: 13px; }
    </style>
</head>
<body>

    <div id="authScreen">
        <div class="auth-box">
            <h1 style="color:var(--accent); font-weight:900; margin-bottom:20px;">VINHMODLAG</h1>
            <div class="auth-tabs">
                <div class="auth-tab active" id="tabLogin" onclick="switchAuth('login')">ƒêƒÉng nh·∫≠p</div>
                <div class="auth-tab" id="tabReg" onclick="switchAuth('reg')">ƒêƒÉng k√Ω</div>
            </div>
            <div id="formLogin">
                <input type="text" id="uLog" placeholder="T√™n t√†i kho·∫£n...">
                <input type="password" id="pLog" placeholder="M·∫≠t kh·∫©u...">
                <button class="btn-buy" onclick="handleLogin()">V√ÄO C·ª¨A H√ÄNG</button>
            </div>
            <div id="formReg" style="display:none;">
                <input type="text" id="uReg" placeholder="T·∫°o t√™n t√†i kho·∫£n...">
                <input type="password" id="pReg" placeholder="T·∫°o m·∫≠t kh·∫©u...">
                <input type="password" id="pRegConfirm" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u...">
                <button class="btn-buy" style="background:#333;" onclick="handleRegister()">ƒêƒÇNG K√ù NGAY</button>
            </div>
            <p style="font-size:11px; color:#888; margin-top:15px;">Admin: <b>Ho√†ng Vinh</b><br>Zalo: <a href="https://zalo.me/0364684151" style="color:var(--accent); text-decoration:none;">0364684151</a></p>
        </div>
    </div>

    <div id="app" style="display:none">
        <header>
            <div onclick="toggleMenu(true)" style="font-size:25px; cursor:pointer; color: var(--accent);">‚ò∞</div>
            <div class="logo" style="margin-left:15px;">VINHMODLAG</div>
            <div class="wallet"><span id="userBal">0</span>ƒë</div>
        </header>

        <div id="sideMenu">
            <h2 style="margin-top:0">S·∫øp: <span id="uNameDisp" style="color:var(--accent)"></span></h2>
            <button class="btn-buy" style="background:#333; font-size:12px;" onclick="openModal('modalHistory')">üìä L·ªäCH S·ª¨ MUA KEY</button>
            <hr style="border:0; border-top:1px solid var(--border); margin:20px 0;">
            
            <p style="font-size: 12px; font-weight: bold;">N·∫†P TH·∫∫ T·ª∞ ƒê·ªòNG:</p>
            <select id="cardType"><option>Viettel</option><option>Mobi</option><option>Vina</option></select>
            <select id="cardVal"><option value="10000">10,000ƒë</option><option value="20000">20,000ƒë</option><option value="50000">50,000ƒë</option><option value="100000">100,000ƒë</option></select>
            <input id="cardSeri" placeholder="S·ªë Seri..."><input id="cardPin" placeholder="M√£ th·∫ª (PIN)...">
            <button class="btn-buy" onclick="submitCard()">G·ª¨I TH·∫∫</button>

            <div id="adminArea" style="display:none;">
                <div id="robotConsole">
                    <b>üñ•Ô∏è ROBOT ADMIN SYSTEM</b>
                    <div id="robotLogs">ƒêang tr·ª±c...</div>
                    <input id="robotInput" placeholder="L·ªánh Robot...">
                    <button onclick="runRobotCmd()" style="background:#0f8; color:#000; font-weight:bold;">TH·ª∞C THI</button>
                    <button onclick="openModal('modalKey')" style="background:#444; color:#fff; font-size:10px; margin-top:5px;">üì¶ N·∫†P KHO</button>
                </div>
            </div>
            <button onclick="logout()" style="color:red; background:none; border:1px solid red; margin-top:30px;">ƒêƒÇNG XU·∫§T</button>
        </div>

        <div class="container">
            <div class="intro-box">
                <h3 style="margin:0">üíé H·ªÜ TH·ªêNG VINHMODLAG</h3>
                <p style="font-size:13px;">H·ªó tr·ª£ Zalo ch√≠nh ch·ªß: <b>0364684151</b></p>
                <p style="font-size:12px; opacity: 0.8;">H·ªá th·ªëng t·ª± ƒë·ªông l∆∞u tr·ªØ d·ªØ li·ªáu t·∫°i tr√¨nh duy·ªát [2026-02-19].</p>
            </div>
            <div class="shop-grid" id="shopGrid"></div>
        </div>
    </div>

    <div id="modalHistory" class="modal"><div class="modal-content">
        <h3>üìä L·ªäCH S·ª¨ GIAO D·ªäCH</h3>
        <div id="historyDisplay" style="max-height: 400px; overflow-y: auto;"></div>
        <button class="btn-buy" style="background:#333; margin-top:15px;" onclick="closeModal('modalHistory')">ƒê√ìNG</button>
    </div></div>

    <div id="modalKey" class="modal"><div class="modal-content">
        <h3>üì¶ NH·∫¨P KHO PH√ÇN LO·∫†I</h3>
        <select id="kProd"><option value="itachi">Itachi Ping V3</option><option value="hopper">Hopper Plus</option><option value="clone">Acc Clone Lv5</option></select>
        <select id="kTime"><option>1 Ng√†y</option><option>7 Ng√†y</option><option>30 Ng√†y</option><option>Vƒ©nh Vi·ªÖn</option><option>M·∫∑c ƒë·ªãnh</option></select>
        <textarea id="kInput" rows="6" placeholder="M·ªói d√≤ng 1 m√£..."></textarea>
        <button class="btn-buy" onclick="adminAddStock()">X√ÅC NH·∫¨N</button>
        <button onclick="closeModal('modalKey')">H·ª¶Y</button>
    </div></div>

    <div id="overlay" onclick="toggleMenu(false)" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1500;"></div>

    <script>
        const STORAGE_KEY = 'VINHMOD_V54_FINAL';
        const SESSION_KEY = 'VINHMOD_V54_USER';

        let db = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
            users: { "vinhmoddz": { pass: "vinhmoddz", bal: 10000000, admin: true, buys: [], cards: [] } },
            prods: [
                { id: 0, slug: "itachi", name: "Itachi Ping V3", plans: { "1 Ng√†y": 10000, "7 Ng√†y": 50000, "30 Ng√†y": 150000, "Vƒ©nh Vi·ªÖn": 500000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } },
                { id: 1, slug: "hopper", name: "Hopper Plus", plans: { "1 Ng√†y": 15000, "7 Ng√†y": 70000, "30 Ng√†y": 200000, "Vƒ©nh Vi·ªÖn": 700000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } },
                { id: 2, slug: "clone", name: "Acc Clone Level 5", plans: { "M·∫∑c ƒë·ªãnh": 20000 }, stock: { "M·∫∑c ƒë·ªãnh": [] } }
            ]
        };

        let curUser = localStorage.getItem(SESSION_KEY) || null;
        function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(db)); if(curUser) renderShop(); }

        // --- AUTH ---
        function switchAuth(m) {
            document.getElementById('formLogin').style.display = m==='login'?'block':'none';
            document.getElementById('formReg').style.display = m==='reg'?'block':'none';
            document.getElementById('tabLogin').className = `auth-tab ${m==='login'?'active':''}`;
            document.getElementById('tabReg').className = `auth-tab ${m==='reg'?'active':''}`;
        }
        function handleRegister() {
            let u = document.getElementById('uReg').value.trim(), p = document.getElementById('pReg').value, pc = document.getElementById('pRegConfirm').value;
            if(!u || p.length < 3) return alert("D·ªØ li·ªáu qu√° ng·∫Øn!");
            if(p !== pc) return alert("M·∫≠t kh·∫©u kh√¥ng kh·ªõp!");
            if(db.users[u]) return alert("T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i!");
            db.users[u] = { pass: p, bal: 0, admin: false, buys: [], cards: [] };
            save(); alert("ƒêƒÉng k√Ω th√†nh c√¥ng!"); switchAuth('login');
        }
        function handleLogin() {
            let u = document.getElementById('uLog').value.trim(), p = document.getElementById('pLog').value;
            if(db.users[u] && db.users[u].pass === p) { curUser = u; localStorage.setItem(SESSION_KEY, u); initApp(); }
            else alert("Sai th√¥ng tin!");
        }
        function initApp() {
            document.getElementById('authScreen').style.display='none';
            document.getElementById('app').style.display='block';
            document.getElementById('uNameDisp').innerText = curUser;
            document.getElementById('adminArea').style.display = db.users[curUser].admin ? 'block' : 'none';
            renderShop();
        }

        // --- SHOP ---
        function renderShop() {
            document.getElementById('userBal').innerText = db.users[curUser].bal.toLocaleString();
            let grid = document.getElementById('shopGrid'); grid.innerHTML = "";
            db.prods.forEach(p => {
                let sTxt = Object.keys(p.stock).map(k => `<b>${k}:</b> ${p.stock[k].length}`).join(' | ');
                grid.innerHTML += `<div class="product-card">
                    <div class="stock-badge">${sTxt}</div>
                    <h2>${p.name}</h2>
                    <select id="plan-${p.id}">${Object.keys(p.plans).map(k=>`<option value="${k}">${k} - ${p.plans[k].toLocaleString()}ƒë</option>`).join('')}</select>
                    <button class="btn-buy" onclick="buyProcess(event, ${p.id})">MUA NGAY</button>
                </div>`;
            });
        }
        function buyProcess(e, id) {
            let btn = e.target; if(btn.disabled) return;
            let p = db.prods[id], plan = document.getElementById(`plan-${id}`).value, cost = p.plans[plan];
            if(db.users[curUser].bal < cost) return alert("Kh√¥ng ƒë·ªß ti·ªÅn!");
            if(p.stock[plan].length === 0) return alert("H·∫øt h√†ng!");
            btn.disabled = true; btn.innerText = "ƒêANG MUA...";
            setTimeout(() => {
                let key = p.stock[plan].shift();
                db.users[curUser].bal -= cost;
                db.users[curUser].buys.unshift({ name: p.name, plan: plan, key: key, time: new Date().toLocaleString() });
                save(); alert("TH√ÄNH C√îNG! Check l·ªãch s·ª≠ ƒë·ªÉ nh·∫≠n Key.");
                btn.disabled = false; btn.innerText = "MUA NGAY";
            }, 500);
        }

        // --- ADMIN COMMANDS ---
        function runRobotCmd() {
            let cmd = document.getElementById('robotInput').value.trim(), p = cmd.split(" "), log = document.getElementById('robotLogs');
            if(p[0] === ".chuyentien" && p[3] === "chuyen") {
                let u = p[1], v = parseInt(p[2]);
                if(db.users[u]) { db.users[u].bal += v; log.innerHTML += `\n‚úÖ +${v} cho ${u}`; save(); }
            } else if(p[0] === ".checkthe") {
                Object.keys(db.users).forEach(u => db.users[u].cards.forEach(c => { if(c.st === 'Ch·ªù duy·ªát') log.innerHTML += `\nüë§ ${u}: ${c.pin}`; }));
            } else if(p[0] === ".trutien" && p[3] === "tru") {
                let u = p[1], v = parseInt(p[2]);
                if(db.users[u]) { db.users[u].bal -= v; log.innerHTML += `\n‚úÖ -${v} t·ª´ ${u}`; save(); }
            } else { log.innerHTML += "\n‚ùå L·ªánh sai!"; }
            log.scrollTop = log.scrollHeight; document.getElementById('robotInput').value = "";
        }

        function adminAddStock() {
            let slug = document.getElementById('kProd').value, time = document.getElementById('kTime').value, raw = document.getElementById('kInput').value.trim();
            let pr = db.prods.find(x => x.slug === slug);
            if(raw && pr.stock[time]) {
                pr.stock[time].push(...raw.split('\n').filter(k => k.trim() !== ""));
                save(); closeModal('modalKey'); document.getElementById('kInput').value = ""; alert("ƒê√£ n·∫°p kho!");
            }
        }

        function submitCard() {
            let s = document.getElementById('cardSeri').value, p = document.getElementById('cardPin').value;
            if(!s || !p) return alert("Nh·∫≠p ƒë·ªß th√¥ng tin th·∫ª!");
            db.users[curUser].cards.unshift({ t: document.getElementById('cardType').value, v: document.getElementById('cardVal').value, pin: p, st: 'Ch·ªù duy·ªát', time: new Date().toLocaleString() });
            save(); alert("ƒê√£ g·ª≠i th·∫ª n·∫°p!");
        }

        function toggleMenu(s) { document.getElementById('sideMenu').style.left = s?'0':'-450px'; document.getElementById('overlay').style.display = s?'block':'none'; }
        function openModal(id) { 
            document.getElementById(id).style.display = 'flex'; 
            if(id === 'modalHistory') {
                let d = document.getElementById('historyDisplay'); d.innerHTML = "";
                db.users[curUser].buys.forEach(b => d.innerHTML += `<div class="hist-item"><b>${b.name}</b> (${b.plan})<br><span style="color:red; font-weight:bold;">KEY: ${b.key}</span><br><small>${b.time}</small></div>`);
            }
        }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function logout() { localStorage.removeItem(SESSION_KEY); location.reload(); }
        if(curUser) initApp();
    </script>
</body>
</html>
